## 엔티티란 무엇인가?

엔티티는 **고유한 식별성을 가진 객체**를 말합니다. 다시 말해, 엔티티는 그 속성으로 정의되는 것이 아니라, **식별을 통해 구분되는 객체**입니다. 이는 시간이 지나도 동일한 객체로 인식되어야 하는 경우에 해당합니다.

## 속성이 아닌 식별성으로 정의되는 객체

많은 객체들은 속성이 변하더라도 동일한 객체로 인식되어야 합니다. 예를 들어, 사람을 생각해봅시다. 이름, 주소, 직업 등은 시간이 지나면서 변할 수 있지만, 그 사람이 동일한 사람이라는 사실은 변하지 않습니다. 이러한 경우, 그 사람은 엔티티로 모델링됩니다.

## 엔티티의 예시

### 사례: 고객 관리 시스템

고객 관리 시스템에서 고객은 엔티티로 취급됩니다. 고객의 이름, 연락처, 주소 등은 변할 수 있지만, 고객의 식별자는 변하지 않습니다. 따라서 고객 객체는 고유한 식별자를 통해 동일한 고객임을 인식합니다.

## 엔티티와 값 객체(Value Object)의 차이

엔티티와 값 객체의 차이는 고유성의 결정 조건에서 발생합니다.

- **엔티티**: 고유한 식별성을 가지며, 속성이 변하더라도 동일한 객체로 인식됩니다.
- **값 객체**: 식별성이 없으며, 속성에 의해 정의됩니다. 값이 동일하다면 동일한 객체로 취급됩니다.

예를 들어, 돈을 나타내는 객체를 값 객체로 볼 수 있습니다. 1,000원이라는 값은 누구의 손에 있든 동일한 가치를 가집니다.

## 엔티티 모델링 시 고려 사항

- **고유한 식별자 정의**: 엔티티를 식별할 수 있는 고유한 식별자를 정의해야 합니다. 이는 데이터베이스의 기본 키나 시스템에서 유일하게 생성된 ID 등이 될 수 있습니다.
- **식별자와 속성의 분리**: 엔티티의 식별자와 속성을 명확히 구분해야 합니다. 식별자는 객체의 정체성을 정의하고, 속성은 객체의 상태를 나타냅니다.
- **변경 가능한 속성 관리**: 엔티티의 속성은 시간이 지나면서 변할 수 있으므로, 이를 적절히 관리해야 합니다.

## 엔티티의 식별 문제와 해결 방안

시스템 내에서 엔티티의 식별이 정확하지 않으면 데이터 오류나 중복 등의 문제가 발생할 수 있습니다. 이를 방지하기 위해 다음과 같은 방법을 사용할 수 있습니다.

- **유니크한 식별자 사용**: 시스템에서 엔티티를 고유하게 식별할 수 있는 식별자를 사용합니다.
- **동등성(equality) 비교 구현**: 엔티티 클래스에서 `equals` 및 `hashCode` 메서드를 재정의하여 식별자 기반의 비교가 가능하도록 합니다.
- **영속성 컨텍스트 활용**: ORM 등을 사용하여 동일한 식별자의 엔티티가 하나의 인스턴스로 관리되도록 합니다.

## 정리

엔티티는 도메인 주도 설계에서 중요한 역할을 합니다. 고유한 식별성을 가지며, 이를 통해 객체의 연속성과 동일성을 유지할 수 있습니다. 엔티티를 정확하게 모델링하고 구현함으로써 더 견고하고 유지보수 가능한 시스템을 구축할 수 있습니다.