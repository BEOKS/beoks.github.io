μ†ν”„νΈμ›¨μ–΄ κ°λ°μ—μ„ **ν…μ¤νΈ**λ” μ„ νƒμ΄ μ•„λ‹ ν•„μμ…λ‹λ‹¤. νΉν λ³µμ΅μ„±μ΄ μ¦κ°€ν•λ” ν„λ€ μ• ν”λ¦¬μΌ€μ΄μ… ν™κ²½μ—μ„ ν…μ¤νΈ μ©μ΄μ„±μ€ ν”„λ΅μ νΈμ μ„±κ³µκ³Ό μ§κ²°λλ” μ¤‘μ”ν• μ”μ†μ…λ‹λ‹¤. μ΄λ² κΈ€μ—μ„λ” ν…μ¤νΈ μ©μ΄μ„±μ„ λ†’μ΄λ” ν•µμ‹¬ μ „λµ μ¤‘ ν•λ‚μΈ **ν…μ¤νΈλ¥Ό μ„ν• μΈν„°νμ΄μ¤ μ„¤κ³„**μ— λ€ν•΄ μ•μ•„λ³΄κ² μµλ‹λ‹¤. μ μ„¤κ³„λ μΈν„°νμ΄μ¤λ” μ½”λ“μ μ μ—°μ„±μ„ λ†’μ΄κ³ , λ‹¨μ„ ν…μ¤νΈ μ‘μ„±μ„ μ©μ΄ν•κ² λ§λ“¤μ–΄ κ²°κ³Όμ μΌλ΅ λ” κ²¬κ³ ν•κ³  μ μ§€λ³΄μν•κΈ° μ‰¬μ΄ μ†ν”„νΈμ›¨μ–΄λ¥Ό λ§λ“λ” λ° κΈ°μ—¬ν•©λ‹λ‹¤.

---

## μ™ μΈν„°νμ΄μ¤κ°€ ν…μ¤νΈμ— μ¤‘μ”ν• κΉμ”?

μ• ν”λ¦¬μΌ€μ΄μ…μ κ° μ»΄ν¬λ„νΈ(ν΄λμ¤ λλ” λ¨λ“)κ°€ μ„λ΅ κΈ΄λ°€ν•κ² μ—°κ²°λμ–΄ μλ‹¤λ©΄, νΉμ • μ»΄ν¬λ„νΈλ§ λ…λ¦½μ μΌλ΅ ν…μ¤νΈν•κΈ° λ§¤μ° μ–΄λ µμµλ‹λ‹¤. μ΄λ¥Ό κ°•ν• κ²°ν•©(Tight Coupling)μ΄λΌκ³  ν•©λ‹λ‹¤. μΈν„°νμ΄μ¤λ” μ΄λ¬ν• κ°•ν• κ²°ν•©μ„ λμ¨ν•κ² λ§λ“λ” κ°•λ ¥ν• λ„κµ¬μ…λ‹λ‹¤.

μΈν„°νμ΄μ¤λ¥Ό μ‚¬μ©ν•λ©΄ μ»΄ν¬λ„νΈλ” κµ¬μ²΄μ μΈ κµ¬ν„ ν΄λμ¤κ°€ μ•„λ‹ μ¶”μƒν™”λ μΈν„°νμ΄μ¤μ— μμ΅΄ν•κ² λ©λ‹λ‹¤. μ΄λ¥Ό ν†µν•΄ μ‹¤μ  κµ¬ν„ κ°μ²΄ λ€μ‹  [[ν…μ¤νΈ λ”λΈ”(Test Double)]](μ: Mock κ°μ²΄)μ„ μ‰½κ² μ£Όμ…ν•  μ μκ² λμ–΄, νΉμ • λ΅μ§μ„ κ²©λ¦¬λ ν™κ²½μ—μ„ ν…μ¤νΈν•λ” κ²ƒμ΄ κ°€λ¥ν•΄μ§‘λ‹λ‹¤.

μ΄κ²ƒμ΄ λ°”λ΅ [[μμ΅΄μ„± μ—­μ „ μ›μΉ™ (Dependency Inversion Principle)]]μ ν•µμ‹¬ μ•„μ΄λ””μ–΄ μ¤‘ ν•λ‚μ΄λ©°, ν…μ¤νΈ μ©μ΄μ„± ν–¥μƒμ κΈ°λ³Έ μ „μ κ°€ λ©λ‹λ‹¤.


```mermaid
graph TD
    subgraph "κ°•ν• κ²°ν•© (μΈν„°νμ΄μ¤ μ‚¬μ© μ „)"
        A[μ£Όλ¬Έ μ„λΉ„μ¤] --> B(κ²°μ  μ‹μ¤ν… κµ¬ν„μ²΄)
        A --> C(μ¬κ³  κ΄€λ¦¬ μ‹μ¤ν… κµ¬ν„μ²΄)
        direction LR
    end

    subgraph "λμ¨ν• κ²°ν•© (μΈν„°νμ΄μ¤ μ‚¬μ© ν›„)"
        D[μ£Όλ¬Έ μ„λΉ„μ¤] --> E{IPaymentSystem}
        D --> F{IInventorySystem}
        G[μ‹¤μ  κ²°μ  μ‹μ¤ν…] -.->|κµ¬ν„| E
        H[μ‹¤μ  μ¬κ³  κ΄€λ¦¬ μ‹μ¤ν…] -.->|κµ¬ν„| F
        I[Mock κ²°μ  μ‹μ¤ν…] -.->|ν…μ¤νΈ μ‹ κµ¬ν„| E
        J[Mock μ¬κ³  κ΄€λ¦¬ μ‹μ¤ν…] -.->|ν…μ¤νΈ μ‹ κµ¬ν„| F
        direction LR
    end

    subgraph ν…μ¤νΈ μ‹ μμ΅΄μ„± μ£Όμ…
        K[μ£Όλ¬Έ μ„λΉ„μ¤ ν…μ¤νΈ] --> D
        K --> I
        K --> J
        direction LR
    end
```

μ„ κ·Έλ¦Όμ€ μΈν„°νμ΄μ¤ λ„μ… μ „ν›„μ μμ΅΄μ„± κ΄€κ³„ λ³€ν™”λ¥Ό λ³΄μ—¬μ¤λ‹λ‹¤. μΈν„°νμ΄μ¤λ¥Ό μ‚¬μ©ν•λ©΄, `μ£Όλ¬Έ μ„λΉ„μ¤`λ” `IPaymentSystem`κ³Ό `IInventorySystem` μΈν„°νμ΄μ¤μ— μμ΅΄ν•κ² λ©λ‹λ‹¤. λ”°λΌμ„ ν…μ¤νΈ μ‹μ—λ” μ΄ μΈν„°νμ΄μ¤λ“¤μ μ‹¤μ  κµ¬ν„ λ€μ‹  `Mock κ²°μ  μ‹μ¤ν…`μ΄λ‚ `Mock μ¬κ³  κ΄€λ¦¬ μ‹μ¤ν…`κ³Ό κ°™μ€ ν…μ¤νΈ λ€μ—­μ„ μ£Όμ…ν•μ—¬ `μ£Όλ¬Έ μ„λΉ„μ¤`μ λ΅μ§λ§μ„ λ…λ¦½μ μΌλ΅ κ²€μ¦ν•  μ μμµλ‹λ‹¤.

---

## ν…μ¤νΈλ¥Ό κ³ λ ¤ν• μΈν„°νμ΄μ¤ μ„¤κ³„ μ›μΉ™

ν…μ¤νΈ μ©μ΄μ„±μ„ κ·Ήλ€ν™”ν•λ” μΈν„°νμ΄μ¤λ¥Ό μ„¤κ³„ν•κΈ° μ„ν• λ‡ κ°€μ§€ ν•µμ‹¬ μ›μΉ™μ΄ μμµλ‹λ‹¤. μ΄λ¬ν• μ›μΉ™λ“¤μ€ [[SOLID μ›μΉ™]]κ³Όλ„ κΉμ€ κ΄€λ ¨μ΄ μμµλ‹λ‹¤.

### 1. μ—­ν• κ³Ό μ±…μ„μ— μ§‘μ¤‘ (λ‹¨μΌ μ±…μ„ μ›μΉ™)

μΈν„°νμ΄μ¤λ” λ…ν™•ν•κ³  λ‹¨μΌν• μ—­ν• μ„ κ°€μ Έμ•Ό ν•©λ‹λ‹¤. λ„λ¬΄ λ§μ€ κΈ°λ¥μ„ ν•λ‚μ μΈν„°νμ΄μ¤μ— λ‹΄μΌλ©΄, ν•΄λ‹Ή μΈν„°νμ΄μ¤λ¥Ό κµ¬ν„ν•λ” ν΄λμ¤κ°€ λ¶ν•„μ”ν•κ² μ»¤μ§€κ³  ν…μ¤νΈ λ²”μ„λ„ λ„“μ–΄μ§‘λ‹λ‹¤. μ΄λ” [[λ‹¨μΌ μ±…μ„ μ›μΉ™(Single Responsibility Principle)]]μ„ λ”°λ¥΄λ” κ²ƒμ…λ‹λ‹¤.

- **λ‚μ μ**: `IUserService` μΈν„°νμ΄μ¤μ— μ‚¬μ©μ μΈμ¦, ν”„λ΅ν•„ κ΄€λ¦¬, μ£Όλ¬Έ λ‚΄μ—­ μ΅°ν λ“± κ΄€λ ¨μ„±μ΄ μ κ±°λ‚ ν•λ‚μ μ£Όλ μ±…μ„μΌλ΅ λ³΄κΈ° μ–΄λ ¤μ΄ κΈ°λ¥λ“¤μ΄ λ¨λ‘ ν¬ν•¨λ κ²½μ°μ…λ‹λ‹¤.
- **μΆ‹μ€ μ**: `IAuthenticationService`, `IUserProfileService`, `IOrderHistoryService` λ“±μΌλ΅ μ—­ν• μ„ λ…ν™•ν λ¶„λ¦¬ν•μ—¬ κ° μΈν„°νμ΄μ¤κ°€ ν•λ‚μ μ£Όλ μ±…μ„λ§μ„ κ°–λ„λ΅ ν•λ” κ²ƒμ…λ‹λ‹¤.

### 2. μ‘μ€ λ‹¨μ„μ μΈν„°νμ΄μ¤ (μΈν„°νμ΄μ¤ λ¶„λ¦¬ μ›μΉ™)

ν΄λΌμ΄μ–ΈνΈκ°€ μμ‹ μ΄ μ‚¬μ©ν•μ§€ μ•λ” λ©”μ„λ“μ— μμ΅΄ν•μ§€ μ•λ„λ΅ μΈν„°νμ΄μ¤λ¥Ό μ‘κ² λ¶„λ¦¬ν•΄μ•Ό ν•©λ‹λ‹¤. μ΄λ” [[μΈν„°νμ΄μ¤ λ¶„λ¦¬ μ›μΉ™(Interface Segregation Principle)]]μ…λ‹λ‹¤. ν΄λΌμ΄μ–ΈνΈλ” μμ‹ μ΄ ν•„μ”λ΅ ν•λ” μµμ†ν•μ κΈ°λ¥λ§μ„ μ •μν• μΈν„°νμ΄μ¤λ¥Ό μ‚¬μ©ν•λ” κ²ƒμ΄ ν…μ¤νΈ λ€μ—­μ„ λ§λ“¤ λ• λ” μ©μ΄ν•λ©°, μΈν„°νμ΄μ¤ λ³€κ²½μΌλ΅ μΈν• νκΈ‰ ν¨κ³Όλ„ μ¤„μΌ μ μμµλ‹λ‹¤.

- μλ¥Ό λ“¤μ–΄, μ–΄λ–¤ ν΄λΌμ΄μ–ΈνΈλ” μ‚¬μ©μ μ •λ³΄ μ΅°ν κΈ°λ¥λ§ ν•„μ”ν•κ³ , λ‹¤λ¥Έ ν΄λΌμ΄μ–ΈνΈλ” μ‚¬μ©μ μ •λ³΄ μμ • κΈ°λ¥λ§ ν•„μ”ν•λ‹¤λ©΄, `IUserReader`μ™€ `IUserWriter` μΈν„°νμ΄μ¤λ΅ λ¶„λ¦¬ν•λ” κ²ƒμ„ κ³ λ ¤ν•  μ μμµλ‹λ‹¤. μΈν„°νμ΄μ¤ λ¶„λ¦¬μ— λ€ν• μμ„Έν• λ°©λ²•μ€ μΈν„°νμ΄μ¤ λ¶„λ¦¬ μ›μΉ™ μ μ© κ°€μ΄λ“λ¥Ό μ°Έκ³ ν•΄μ£Όμ„Έμ”.

### 3. λ…ν™•ν• κ³„μ•½ μ •μ

μΈν„°νμ΄μ¤λ” ν•΄λ‹Ή μΈν„°νμ΄μ¤λ¥Ό ν†µν•΄ μ–΄λ–¤ κΈ°λ¥μ„ μ κ³µν•κ³ , μ–΄λ–¤ μ…λ ¥κ°’μ„ λ°›μ•„ μ–΄λ–¤ κ²°κ³Ό(λλ” μμ™Έ)λ¥Ό λ°ν™ν•λ”μ§€μ— λ€ν• **λ…ν™•ν• κ³„μ•½**μ„ μ •μν•΄μ•Ό ν•©λ‹λ‹¤. JavaDocκ³Ό κ°™μ€ λ¬Έμ„ μ£Όμ„ λ“±μ„ ν™μ©ν•μ—¬ κ° λ©”μ„λ“μ μ‚¬μ „ μ΅°κ±΄(Preconditions), μ‚¬ν›„ μ΅°κ±΄(Postconditions), λ¶λ³€μ‹(Invariants)μ„ λ…μ‹ν•λ©΄, κµ¬ν„ ν΄λμ¤μ™€ ν΄λΌμ΄μ–ΈνΈ λ¨λ‘ μΈν„°νμ΄μ¤λ¥Ό μ¬λ°”λ¥΄κ² μ΄ν•΄ν•κ³  μ‚¬μ©ν•λ” λ° λ„μ›€μ΄ λ©λ‹λ‹¤. μ΄λ” λ””μμΈ λ°”μ΄ μ»¨νΈλ™νΈ(Design by Contract) κ°λ…κ³Ό λ°€μ ‘ν•κ² κ΄€λ ¨λμ–΄ μμµλ‹λ‹¤.

### 4. μμ΅΄μ„± μ£Όμ… μ©μ΄μ„±

μΈν„°νμ΄μ¤λ” μμ΅΄μ„± μ£Όμ…(Dependency Injection)μ„ ν†µν•΄ κµ¬ν„μ²΄λ¥Ό μ™Έλ¶€μ—μ„ μ‰½κ² μ κ³µλ°›μ„ μ μλ„λ΅ μ„¤κ³„λμ–΄μ•Ό ν•©λ‹λ‹¤. μƒμ„±μ μ£Όμ…μ΄λ‚ μ„Έν„°(Setter) μ£Όμ… λ°©μ‹μ„ ν†µν•΄ μΈν„°νμ΄μ¤ νƒ€μ…μ μμ΅΄μ„±μ„ μ£Όμ…λ°›λ„λ΅ ν•λ©΄, μ΄μ ν™κ²½μ—μ„λ” μ‹¤μ  κµ¬ν„μ²΄λ¥Ό, ν…μ¤νΈ ν™κ²½μ—μ„λ” ν…μ¤νΈ λ€μ—­(Mock κ°μ²΄ λ“±)μ„ κ°„νΈν•κ² μ£Όμ…ν•μ—¬ μ‚¬μ©ν•  μ μμµλ‹λ‹¤.

```java
// μƒμ„±μ μ£Όμ…μ„ ν†µν•΄ IPaymentSystem μΈν„°νμ΄μ¤μ κµ¬ν„μ²΄λ¥Ό μ£Όμ…λ°›λ” OrderService
public class OrderService {
    private final IPaymentSystem paymentSystem;
    private final IInventorySystem inventorySystem;

    // μ¤ν”„λ§ ν”„λ μ„μ›ν¬μ—μ„λ” @Autowired μ–΄λ…Έν…μ΄μ…μ„ μƒμ„±μμ— μ‚¬μ©ν•μ—¬ μμ΅΄μ„±μ„ μλ™μΌλ΅ μ£Όμ…λ°›μ„ μ μμµλ‹λ‹¤.
    // public OrderService(@Autowired IPaymentSystem paymentSystem, @Autowired IInventorySystem inventorySystem) {
    public OrderService(IPaymentSystem paymentSystem, IInventorySystem inventorySystem) {
        this.paymentSystem = paymentSystem; // μ™Έλ¶€μ—μ„ κµ¬μ²΄μ μΈ κµ¬ν„μ΄ μ•„λ‹ μΈν„°νμ΄μ¤ νƒ€μ…μΌλ΅ μ£Όμ…λ°›μµλ‹λ‹¤.
        this.inventorySystem = inventorySystem;
    }

    public void placeOrder(Order order) {
        // μ£Όλ¬Έ μ²λ¦¬ λ΅μ§
        // paymentSystemκ³Ό inventorySystemμ€ μ‹¤μ  κµ¬ν„μ²΄μΌ μλ„ μκ³ , ν…μ¤νΈ μ‹μ—λ” Mock κ°μ²΄μΌ μλ„ μμµλ‹λ‹¤.
        paymentSystem.processPayment(order.getPaymentDetails());
        inventorySystem.updateStock(order.getProductId(), order.getQuantity());
        // ...
    }
}
```

μ„ μ½”λ“μ—μ„ `OrderService`λ” μƒμ„±μλ¥Ό ν†µν•΄ `IPaymentSystem`κ³Ό `IInventorySystem` μΈν„°νμ΄μ¤μ κµ¬ν„μ²΄λ¥Ό μ£Όμ…λ°›μµλ‹λ‹¤. μ΄λ¥Ό ν†µν•΄ `OrderService`λ” κµ¬μ²΄μ μΈ κ²°μ  λ°©μ‹μ΄λ‚ μ¬κ³  κ΄€λ¦¬ λ°©μ‹μ— μ§μ ‘ μμ΅΄ν•μ§€ μ•κ² λ©λ‹λ‹¤.

### 5. κµ¬ν„ μ„Έλ¶€μ‚¬ν•­ λ…Έμ¶ μµμ†ν™” (μ •λ³΄ μ€λ‹‰)

μΈν„°νμ΄μ¤λ” "λ¬΄μ—‡μ„ ν•λ”κ°€(What)"μ— μ§‘μ¤‘ν•κ³ , "μ–΄λ–»κ² ν•λ”κ°€(How)"λ” κµ¬ν„ ν΄λμ¤μ— μ„μ„ν•΄μ•Ό ν•©λ‹λ‹¤. μΈν„°νμ΄μ¤μ— κµ¬ν„ μ„Έλ¶€μ‚¬ν•­μ΄ λ…Έμ¶λλ©΄ (μ: νΉμ • κΈ°μ μ— μΆ…μ†μ μΈ λ©”μ„λ“ μ‹κ·Έλ‹μ²), ν•΄λ‹Ή μ„Έλ¶€μ‚¬ν•­μ΄ λ³€κ²½λ  λ• μΈν„°νμ΄μ¤ μμ²΄μ™€ μ΄λ¥Ό μ‚¬μ©ν•λ” λ¨λ“  ν΄λΌμ΄μ–ΈνΈ μ½”λ“κ°€ μν–¥μ„ λ°›μ„ μ μμµλ‹λ‹¤. μ΄λ” ν…μ¤νΈμ—λ„ λ¶ν•„μ”ν• λ³µμ΅μ„±μ„ λ”ν•λ©°, μΈν„°νμ΄μ¤μ μ—­ν• μ„ μ•½ν™”μ‹ν‚µλ‹λ‹¤. μ •λ³΄ μ€λ‹‰(Information Hiding) μ›μΉ™μ„ μ§€ν‚¤λ” κ²ƒμ΄ μ¤‘μ”ν•©λ‹λ‹¤.

---

## Spring ν”„λ μ„μ›ν¬μ—μ„μ ν…μ¤νΈ κ°€λ¥ν• μΈν„°νμ΄μ¤ μ„¤κ³„ μμ‹

μ¤ν”„λ§ ν”„λ μ„μ›ν¬λ” μμ΅΄μ„± μ£Όμ…(DI)κ³Ό μΈν„°νμ΄μ¤ κΈ°λ° ν”„λ΅κ·Έλλ°μ„ ν•µμ‹¬ μ›μΉ™μΌλ΅ μ‚Όκ³  μμ–΄, ν…μ¤νΈ μ©μ΄μ„±μ΄ λ†’μ€ μ• ν”λ¦¬μΌ€μ΄μ… κ°λ°μ„ μμ—°μ¤λ½κ² μ λ„ν•©λ‹λ‹¤.

λ‹¤μμ€ μ¤ν”„λ§ ν™κ²½μ—μ„ μ£Όλ¬Έ μ²λ¦¬ μ„λΉ„μ¤μ μΈν„°νμ΄μ¤μ™€ κµ¬ν„, κ·Έλ¦¬κ³  ν…μ¤νΈ μ½”λ“λ¥Ό λ³΄μ—¬μ£Όλ” μμ‹μ…λ‹λ‹¤.

**μΈν„°νμ΄μ¤ μ •μ:**

```java
// src/main/java/com/example/myapp/order/OrderService.java
package com.example.myapp.order;

import com.example.myapp.Order; // μ£Όλ¬Έ μ •λ³΄λ¥Ό λ‹΄λ” DTO λλ” Entity
import com.example.myapp.PaymentResult; // κ²°μ  κ²°κ³Όλ¥Ό λ‹΄λ” κ°μ²΄

// μ£Όλ¬Έ μ²λ¦¬ μ„λΉ„μ¤μ κ³„μ•½μ„ μ •μν•λ” μΈν„°νμ΄μ¤
public interface OrderService {
    PaymentResult processOrder(Order order);
}
```

**κµ¬ν„ ν΄λμ¤:**

```java
// src/main/java/com/example/myapp/order/OrderServiceImpl.java
package com.example.myapp.order;

import com.example.myapp.Order;
import com.example.myapp.PaymentResult;
import com.example.myapp.payment.PaymentGateway; // μ™Έλ¶€ κ²°μ  μ‹μ¤ν… μ—°λ™μ„ μ„ν• μΈν„°νμ΄μ¤
import com.example.myapp.inventory.InventoryService; // λ‚΄λ¶€ μ¬κ³  κ΄€λ¦¬ μ„λΉ„μ¤λ¥Ό μ„ν• μΈν„°νμ΄μ¤

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;

@Service // μ΄ ν΄λμ¤κ°€ μ¤ν”„λ§μ μ„λΉ„μ¤ λΉ(Bean)μ„μ„ λ‚νƒ€λƒ…λ‹λ‹¤.
public class OrderServiceImpl implements OrderService {

    private final PaymentGateway paymentGateway;
    private final InventoryService inventoryService;

    // μƒμ„±μλ¥Ό ν†µν•΄ PaymentGatewayμ™€ InventoryService μΈν„°νμ΄μ¤μ κµ¬ν„μ²΄λ¥Ό μ£Όμ…λ°›μµλ‹λ‹¤.
    // μ¤ν”„λ§μ΄ μμ΅΄μ„± μ£Όμ…μ„ λ‹΄λ‹Ήν•©λ‹λ‹¤.
    @Autowired
    public OrderServiceImpl(PaymentGateway paymentGateway, InventoryService inventoryService) {
        this.paymentGateway = paymentGateway;
        this.inventoryService = inventoryService;
    }

    @Override
    public PaymentResult processOrder(Order order) {
        // 1. μ¬κ³  ν™•μΈ λ΅μ§ (InventoryService μΈν„°νμ΄μ¤ μ‚¬μ©)
        boolean stockAvailable = inventoryService.checkStock(order.getProductId(), order.getQuantity());
        if (!stockAvailable) {
            // μ‹¤μ λ΅λ” μ‚¬μ©μ μ •μ μμ™Έλ¥Ό μ‚¬μ©ν•λ” κ²ƒμ΄ μΆ‹μµλ‹λ‹¤.
            throw new RuntimeException("μƒν’ ID '" + order.getProductId() + "'μ μ¬κ³ κ°€ λ¶€μ΅±ν•©λ‹λ‹¤.");
        }

        // 2. κ²°μ  μ‹λ„ λ΅μ§ (PaymentGateway μΈν„°νμ΄μ¤ μ‚¬μ©)
        PaymentResult paymentResult = paymentGateway.attemptPayment(order.getTotalAmount(), order.getPaymentDetails());

        // 3. κ²°μ  μ„±κ³µ μ‹ μ¬κ³  μ°¨κ° λ΅μ§ (InventoryService μΈν„°νμ΄μ¤ μ‚¬μ©)
        if (paymentResult.isSuccess()) {
            inventoryService.decreaseStock(order.getProductId(), order.getQuantity());
        } else {
            // κ²°μ  μ‹¤ν¨ μ‹ λ΅μ§ (μ: μ£Όλ¬Έ μƒνƒ λ³€κ²½ λ“±)
        }

        return paymentResult;
    }
}
```

μ„ `OrderServiceImpl`μ€ `PaymentGateway`μ™€ `InventoryService`λΌλ” **λ‹¤λ¥Έ μΈν„°νμ΄μ¤λ“¤**μ— μμ΅΄ν•κ³  μμµλ‹λ‹¤. μ¤ν”„λ§ μ»¨ν…μ΄λ„κ°€ μ‹¤ν–‰λ  λ• μ΄ μΈν„°νμ΄μ¤λ“¤μ μ‹¤μ  κµ¬ν„μ²΄(μ¤ν”„λ§ λΉμΌλ΅ λ“±λ΅λ)λ¥Ό μ£Όμ…ν•΄μ¤λ‹λ‹¤.

**ν…μ¤νΈ μ½”λ“ (JUnit 5μ™€ Mockito μ‚¬μ©):**

```java
// src/test/java/com/example/myapp/order/OrderServiceImplTest.java
package com.example.myapp.order;

import com.example.myapp.Order;
import com.example.myapp.PaymentDetails; // κ²°μ  μƒμ„Έ μ •λ³΄ κ°μ²΄
import com.example.myapp.PaymentResult;
import com.example.myapp.payment.PaymentGateway;
import com.example.myapp.inventory.InventoryService;

import org.junit.jupiter.api.BeforeEach;
import org.junit.jupiter.api.DisplayName;
import org.junit.jupiter.api.Test;
import org.junit.jupiter.api.extension.ExtendWith;
import org.mockito.InjectMocks; // ν…μ¤νΈ λ€μƒ ν΄λμ¤μ— @MockμΌλ΅ μƒμ„±λ κ°μ²΄λ“¤μ„ μ£Όμ…ν•©λ‹λ‹¤.
import org.mockito.Mock; // Mock κ°μ²΄λ¥Ό μƒμ„±ν•©λ‹λ‹¤.
import org.mockito.junit.jupiter.MockitoExtension; // Mockito κΈ°λ¥μ„ JUnit 5μ—μ„ μ‚¬μ©ν•κΈ° μ„ν• ν™•μ¥μ…λ‹λ‹¤.

import static org.mockito.Mockito.*; // Mockitoμ static λ©”μ„λ“ (when, verify λ“±)λ¥Ό μ‚¬μ©ν•κΈ° μ„ν•¨μ…λ‹λ‹¤.
import static org.junit.jupiter.api.Assertions.*; // JUnitμ assertions (assertTrue, assertEquals λ“±)λ¥Ό μ‚¬μ©ν•κΈ° μ„ν•¨μ…λ‹λ‹¤.

@ExtendWith(MockitoExtension.class) // JUnit 5 ν…μ¤νΈμ—μ„ Mockito ν™•μ¥μ„ μ‚¬μ©ν•λ„λ΅ μ„¤μ •ν•©λ‹λ‹¤.
class OrderServiceImplTest {

    @Mock // PaymentGateway μΈν„°νμ΄μ¤μ Mock κ°μ²΄λ¥Ό μƒμ„±ν•©λ‹λ‹¤.
    private PaymentGateway mockPaymentGateway;

    @Mock // InventoryService μΈν„°νμ΄μ¤μ Mock κ°μ²΄λ¥Ό μƒμ„±ν•©λ‹λ‹¤.
    private InventoryService mockInventoryService;

    @InjectMocks // @MockμΌλ΅ μ„ μ–Έλ mockPaymentGatewayμ™€ mockInventoryServiceλ¥Ό orderService ν•„λ“μ— μ£Όμ…ν•©λ‹λ‹¤.
    private OrderServiceImpl orderService;

    private Order testOrder;
    private PaymentDetails testPaymentDetails;

    @BeforeEach
    void setUp() {
        // κ° ν…μ¤νΈ λ©”μ„λ“ μ‹¤ν–‰ μ „μ— κ³µν†µμ μΌλ΅ μ‚¬μ©ν•  κ°μ²΄λ“¤μ„ μ΄κΈ°ν™”ν•©λ‹λ‹¤.
        testPaymentDetails = new PaymentDetails("1234-5678-9012-3456", "12/25", "789");
        testOrder = new Order("PROD-001", 2, 20000.0, testPaymentDetails); // μƒν’ID, μλ‰, μ΄μ•΅, κ²°μ μ •λ³΄
    }

    @Test
    @DisplayName("μ£Όλ¬Έ μ²λ¦¬ μ„±κ³µ: μ¬κ³  ν™•μΈ, κ²°μ  μ„±κ³µ, μ¬κ³  μ°¨κ°")
    void processOrder_success_whenStockAvailableAndPaymentSucceeds() {
        // given (ν…μ¤νΈλ¥Ό μ„ν• μ‚¬μ „ μ΅°κ±΄ μ„¤μ •)
        // mockInventoryService.checkStock λ©”μ„λ“κ°€ νΉμ • μΈμλ΅ νΈμ¶λ  λ• trueλ¥Ό λ°ν™ν•λ„λ΅ μ„¤μ •ν•©λ‹λ‹¤.
        when(mockInventoryService.checkStock("PROD-001", 2)).thenReturn(true);
        // mockPaymentGateway.attemptPayment λ©”μ„λ“κ°€ νΉμ • μΈμλ΅ νΈμ¶λ  λ• μ„±κ³µ κ²°κ³Όλ¥Ό λ‹΄μ€ PaymentResult κ°μ²΄λ¥Ό λ°ν™ν•λ„λ΅ μ„¤μ •ν•©λ‹λ‹¤.
        when(mockPaymentGateway.attemptPayment(20000.0, testPaymentDetails))
                .thenReturn(new PaymentResult(true, "PAYMENT_SUCCESS_ID_001"));

        // when (ν…μ¤νΈν•λ ¤λ” μ‹¤μ  λ™μ‘ μ‹¤ν–‰)
        PaymentResult result = orderService.processOrder(testOrder);

        // then (μ‹¤ν–‰ κ²°κ³Ό κ²€μ¦)
        assertNotNull(result);
        assertTrue(result.isSuccess());
        assertEquals("PAYMENT_SUCCESS_ID_001", result.getTransactionId());

        // verify: νΉμ • λ©”μ„λ“κ°€ μμƒλ νμλ§νΌ νΈμ¶λμ—λ”μ§€ κ²€μ¦ν•©λ‹λ‹¤.
        verify(mockInventoryService, times(1)).checkStock("PROD-001", 2);
        verify(mockPaymentGateway, times(1)).attemptPayment(20000.0, testPaymentDetails);
        verify(mockInventoryService, times(1)).decreaseStock("PROD-001", 2); // μ¬κ³  μ°¨κ° λ©”μ„λ“ νΈμ¶ κ²€μ¦
    }

    @Test
    @DisplayName("μ£Όλ¬Έ μ²λ¦¬ μ‹¤ν¨: μ¬κ³  λ¶€μ΅±")
    void processOrder_fail_whenStockNotAvailable() {
        // given
        // μ¬κ³ κ°€ μ—†λ” μƒν™©μ„ κ°€μ •ν•©λ‹λ‹¤.
        when(mockInventoryService.checkStock("PROD-001", 2)).thenReturn(false);

        // when & then
        // μμ™Έκ°€ λ°μƒν•λ”μ§€, κ·Έλ¦¬κ³  κ·Έ μμ™Έ λ©”μ‹μ§€κ°€ μμƒκ³Ό κ°™μ€μ§€ κ²€μ¦ν•©λ‹λ‹¤.
        RuntimeException exception = assertThrows(RuntimeException.class, () -> {
            orderService.processOrder(testOrder);
        });
        assertEquals("μƒν’ ID 'PROD-001'μ μ¬κ³ κ°€ λ¶€μ΅±ν•©λ‹λ‹¤.", exception.getMessage());

        // μ¬κ³  λ¶€μ΅± μ‹ κ²°μ  μ‹λ„λ‚ μ¬κ³  μ°¨κ° λ΅μ§μ΄ μ‹¤ν–‰λμ§€ μ•μ•„μ•Ό ν•©λ‹λ‹¤.
        verify(mockPaymentGateway, never()).attemptPayment(anyDouble(), any(PaymentDetails.class));
        verify(mockInventoryService, never()).decreaseStock(anyString(), anyInt());
    }
}
```

μ„ ν…μ¤νΈ μ½”λ“μ—μ„ `OrderServiceImplTest`λ” `OrderServiceImpl`μ ν•µμ‹¬ λ΅μ§λ§μ„ κ²©λ¦¬ν•μ—¬ ν…μ¤νΈν•©λ‹λ‹¤. `@Mock` μ–΄λ…Έν…μ΄μ…μ„ μ‚¬μ©ν•μ—¬ `PaymentGateway`μ™€ `InventoryService`μ μ‹¤μ  κµ¬ν„ λ€μ‹  ν…μ¤νΈ λ€μ—­(Mock κ°μ²΄)μ„ μƒμ„±ν•κ³ , `@InjectMocks` μ–΄λ…Έν…μ΄μ…μ„ ν†µν•΄ μ΄ Mock κ°μ²΄λ“¤μ„ ν…μ¤νΈ λ€μƒμΈ `orderService` μΈμ¤ν„΄μ¤μ— μ£Όμ…ν•©λ‹λ‹¤.

μ΄μ²λΌ μΈν„°νμ΄μ¤λ¥Ό ν†µν•΄ μμ΅΄μ„±μ„ λ¶„λ¦¬ν•¨μΌλ΅μ¨, `PaymentGateway`μ μ‹¤μ  μ™Έλ¶€ κ²°μ  μ‹μ¤ν… μ—°λ™ λ΅μ§μ΄λ‚ `InventoryService`μ λ°μ΄ν„°λ² μ΄μ¤ μ ‘κ·Ό λ΅μ§ μ—†μ΄λ„ `OrderService`μ λΉ„μ¦λ‹μ¤ λ΅μ§(μ: μ¬κ³  ν™•μΈ -> κ²°μ  μ‹λ„ -> κ²°μ  μ„±κ³µ μ‹ μ¬κ³  μ°¨κ°)μ΄ μ¬λ°”λ¥΄κ² λ™μ‘ν•λ”μ§€λ¥Ό λ…λ¦½μ μΌλ΅, λΉ λ¥΄κ³ , μ•μ •μ μΌλ΅ ν…μ¤νΈν•  μ μκ² λ©λ‹λ‹¤.

---

## ν…μ¤νΈλ¥Ό μ €ν•΄ν•λ” μΈν„°νμ΄μ¤ μ„¤κ³„ ν”Όν•κΈ°

μ¬λ°”λ¥Έ μΈν„°νμ΄μ¤ μ„¤κ³„λ” ν…μ¤νΈ μ©μ΄μ„±μ„ λ†’μ΄μ§€λ§, μλ»λ μ„¤κ³„λ” μ¤νλ ¤ ν…μ¤νΈλ¥Ό μ–΄λ µκ² λ§λ“¤ μ μμµλ‹λ‹¤. μ£Όμν•΄μ•Ό ν•  λ‡ κ°€μ§€ [[ν…μ¤νΈλ¥Ό μ €ν•΄ν•λ” μΈν„°νμ΄μ¤ μ•ν‹°ν¨ν„΄]]μ΄ μ΅΄μ¬ν•©λ‹λ‹¤. μλ¥Ό λ“¤μ–΄, ν•λ‚μ μΈν„°νμ΄μ¤κ°€ λ„λ¬΄ λ§μ€ μ±…μ„μ„ κ°–λ” κ²½μ°(μ†μ„ "God Interface"), λλ” μΈν„°νμ΄μ¤κ°€ μ§€λ‚μΉκ² κµ¬ν„ μ„Έλ¶€μ‚¬ν•­μ— μμ΅΄μ μΈ κ²½μ° ν…μ¤νΈ μ‘μ„±μ΄ λ³µμ΅ν•΄μ§€κ³  μ μ§€λ³΄μκ°€ μ–΄λ ¤μ›μ§‘λ‹λ‹¤.

---

## κ²°λ΅ : ν…μ¤νΈ κ°€λ¥ν• μΈν„°νμ΄μ¤λ” λ¨λ‘λ¥Ό μ„ν• ν¬μμ…λ‹λ‹¤ π‰

ν…μ¤νΈλ¥Ό μ—Όλ‘μ— λ‘” μΈν„°νμ΄μ¤ μ„¤κ³„λ” λ‹¨μν ν…μ¤νΈ μ½”λ“ μ‘μ„±μ„ μ‰½κ² λ§λ“λ” κ²ƒ μ΄μƒμ κ°€μΉλ¥Ό μ κ³µν•©λ‹λ‹¤. μ΄λ” μ½”λ“μ **λ¨λ“μ„±**, **μ μ—°μ„±**, **μ μ§€λ³΄μμ„±**μ„ ν–¥μƒμ‹ν‚¤λ” ν•µμ‹¬μ μΈ μ‹¤μ² λ°©λ²•μ…λ‹λ‹¤.

- **λ¨λ“μ„± ν–¥μƒ**: κ° μ»΄ν¬λ„νΈκ°€ λ…ν™•ν• μΈν„°νμ΄μ¤λ¥Ό ν†µν•΄ μƒνΈμ‘μ©ν•λ―€λ΅, μ‹μ¤ν… μ „μ²΄μ κµ¬μ΅°κ°€ λ…ν™•ν•΄μ§€κ³  κ°λ³„ λ¨λ“μ λ…λ¦½μ μΈ κ°λ° λ° κ°μ„ μ΄ μ©μ΄ν•΄μ§‘λ‹λ‹¤.
- **μ μ—°μ„± μ¦λ€**: μΈν„°νμ΄μ¤λ¥Ό μ‚¬μ©ν•λ©΄ μƒλ΅μ΄ κΈ°λ¥μ„ μ κ³µν•λ” κµ¬ν„μ²΄λ¥Ό μ‰½κ² μ¶”κ°€ν•κ±°λ‚ κΈ°μ΅΄ κµ¬ν„μ²΄λ¥Ό λ‹¤λ¥Έ λ°©μ‹μΌλ΅ κµμ²΄ν•  μ μμµλ‹λ‹¤. μ΄λ” κΈ°λ¥ ν™•μ¥μ΄λ‚ κΈ°μ  μ¤νƒ λ³€κ²½μ— μ μ—°ν•κ² λ€μ‘ν•  μ μκ² ν•©λ‹λ‹¤.
- **μ μ§€λ³΄μμ„± κ°μ„ **: μ μ •μλ μΈν„°νμ΄μ¤λ” μ½”λ“μ μλ„λ¥Ό λ…ν™•ν λ“λ¬λ‚΄κ³ , λ³€κ²½μ΄ λ°μƒν–μ„ λ• κ·Έ νκΈ‰ ν¨κ³Όλ¥Ό ν•΄λ‹Ή μΈν„°νμ΄μ¤μ™€ κ·Έ κµ¬ν„μ²΄λ΅ μ ν•ν•μ—¬ μ μ§€λ³΄μλ¥Ό μ©μ΄ν•κ² λ§λ“­λ‹λ‹¤.

κ²°κµ­, ν…μ¤νΈ κ°€λ¥ν• μΈν„°νμ΄μ¤λ¥Ό μ„¤κ³„ν•λ” κ²ƒμ€ λ‹Ήμ¥μ ν…μ¤νΈ νΈμμ„±μ„ λ„μ–΄, μ¥κΈ°μ μΌλ΅ λ” κ±΄κ°•ν•κ³  λ°μ „ κ°€λ¥ν• μ†ν”„νΈμ›¨μ–΄ μ‹μ¤ν…μ„ κµ¬μ¶•ν•κΈ° μ„ν• μ¤‘μ”ν• ν¬μμ…λ‹λ‹¤. μ²μμ—λ” μΈν„°νμ΄μ¤λ¥Ό μ •μν•κ³  λ¶„λ¦¬ν•λ” κ³Όμ •μ΄ λ‹¤μ† λ²κ±°λ΅­κ² λκ»΄μ§ μ μμ§€λ§, μ΄λ¬ν• λ…Έλ ¥μ€ ν”„λ΅μ νΈμ μƒλ…μ£ΌκΈ° μ „μ²΄μ— κ±Έμ³ ν° μ΄μ μΌλ΅ λμ•„μ¬ κ²ƒμ…λ‹λ‹¤. π‘

---

## μ°Έκ³  μλ£

- Martin, R. C. (2008). _Clean Code: A Handbook of Agile Software Craftsmanship_. Prentice Hall.
- Fowler, M. (2004). _Refactoring: Improving the Design of Existing Code_. Addison-Wesley.
- Meszaros, G. (2007). _xUnit Test Patterns: Refactoring Test Code_. Addison-Wesley.
- Spring Framework Documentation: [https://docs.spring.io/spring-framework/docs/current/reference/html/](https://docs.spring.io/spring-framework/docs/current/reference/html/)
- Mockito Documentation: [https://site.mockito.org/](https://site.mockito.org/)
- Baeldung - Introduction to Mockito: [https://www.baeldung.com/mockito-core-tutorial](https://www.google.com/search?q=https://www.baeldung.com/mockito-core-tutorial)