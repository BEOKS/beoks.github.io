## 개요

웹 애플리케이션에서 사용자 인증은 매우 중요한 부분입니다. 이를 위해 전통적으로 [[세션(Session)]] 기반 인증이 널리 사용되었지만, 최근에는 [[JWT(JSON Web Token)]]를 활용한 토큰 기반 인증이 주목받고 있습니다. 이번 포스트에서는 **세션**과 **JWT**의 차이점, 장단점, 그리고 어떤 상황에서 각각을 사용하는 것이 적절한지 알아보겠습니다.

## 1. 세션과 JWT의 비교

| 구분                                                | 세션 기반 인증             | JWT 기반 인증                |
| ------------------------------------------------- | -------------------- | ------------------------ |
| **상태 관리**                                         | 서버에서 사용자 상태 관리       | 클라이언트에서 토큰 관리            |
| **확장성**                                           | 서버 간 세션 공유 필요        | 서버 확장에 유리                |
| **보안성**                                           | 민감한 정보는 서버에 저장 가능    | 토큰 탈취 시 위험               |
| **로그아웃 처리**                                       | 서버에서 세션 삭제로 즉시 반영 가능 | 토큰 만료 전까지는 무효화 어려움       |
| **저장 위치**                                         | 세션 ID는 쿠키에 저장        | 토큰은 로컬 스토리지나 쿠키에 저장      |
| **[[CSRF(Cross-Site Request Forgery)\|CSRF]] 대응** | CSRF 취약성 있음 (쿠키 사용)  | 헤더를 통해 토큰 전달로 CSRF 방지 가능 |

## 2. 선택 기준

### 2.1 세션을 선택해야 하는 경우

- **보안이 중요한 애플리케이션**: 민감한 데이터를 다루는 서비스로, 서버에서 상태를 관리하여 보안을 강화하고자 할 때.
- **서버 부하가 적은 경우**: 사용자 수가 적거나 서버 리소스 여유가 있을 때.
- **빠른 인증 상태 변경 필요**: 로그아웃이나 권한 변경을 즉시 반영해야 할 때.
- [[컴플라이언스(compliance)]] 이슈 : 개인정보보호법 등 데이터 보호 규제에 따라 외부에 데이터 노출이 제한될 때.

### 2.2 JWT를 선택해야 하는 경우

- **대규모 트래픽 처리 필요**: 확장성이 중요하여 서버 부하를 최소화해야 할 때.
- **분산 시스템 및 마이크로서비스**: 서버 간 *인증 정보 공유 없이* 인증을 처리해야 할 때.
- **모바일 앱 및 SPA**: 다양한 클라이언트에서 인증이 필요하고, 토큰 기반 인증이 편리할 때.

## 3. 보안 고려 사항

### 3.1 세션 보안

- **세션 고정 공격 방지**: 세션 ID를 예측 불가능하게 생성하고, 로그인 시 새로운 세션 ID 발급.
- **세션 만료 시간 설정**: 일정 시간 후 세션을 만료시켜 보안 강화.
- **HTTPS 사용**: 세션 ID가 노출되지 않도록 HTTPS 프로토콜 사용.

### 3.2 JWT 보안

- **토큰 저장 위치 선정**: XSS 공격을 방지하기 위해 로컬 스토리지보다 **HTTP Only 쿠키** 사용 고려.
- **짧은 만료 시간**: 토큰의 유효 기간을 짧게 설정하여 탈취 시 피해 최소화.
- **Refresh Token 사용**: 액세스 토큰이 만료되면 재인증 없이 새 토큰 발급 가능하도록 활용.
- **서명 키 보호**: 토큰 서명에 사용되는 비밀 키를 안전하게 관리.

## 결론

세션 기반 인증과 JWT 기반 인증은 각각의 장단점이 있으며, 애플리케이션의 요구 사항에 따라 적절한 방법을 선택해야 합니다. 보안, 확장성, 개발 편의성 등을 종합적으로 고려하여 최적의 인증 방식을 도입하시기 바랍니다.

## 참고 자료

- [JWT 공식 웹사이트](https://jwt.io/)
- [OWASP Top Ten Security Risks](https://owasp.org/www-project-top-ten/)
- [세션과 토큰 기반 인증의 차이점](https://velog.io/@hygoogi/세션과-토큰-기반-인증의-차이점)

---