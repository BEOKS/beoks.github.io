

데이터베이스나 애플리케이션을 설계할 때, 데이터의 삭제 방법은 중요한 고려 사항 중 하나입니다. 일반적으로 데이터 삭제는 'Hard Delete'와 '[[Soft Delete]]'로 나뉩니다. 그 중 [[Soft Delete]] 는 데이터베이스에서 실제로 데이터를 삭제하지 않고, 특정 플래그를 통해 삭제된 것처럼 표시하는 방법입니다. 이는 데이터 복구나 감사 로그 측면에서 유용하지만, 시스템의 복잡성을 증가시키는 요인이 되기도 합니다. 이번 글에서는 Soft Delete 가 시스템의 복잡성을 어떻게 증가시키는지에 대해 자세히 살펴보겠습니다.

---

## 1. 쿼리 복잡성 증가

Soft Delete 를 구현하면 모든 데이터 조회 쿼리에서 삭제 플래그를 고려해야 합니다. 즉, 각 쿼리마다 `WHERE is_deleted = false`와 같은 조건을 추가해야 합니다. 이는 쿼리 작성 시 추가적인 부담을 주고, 조건을 누락할 경우 **삭제된 데이터가 노출되는 보안 이슈가 발생**할 수 있습니다.

이슈를 대비하기 위해서 [[자동으로 쿼리에 조건절을 추가하는 도구]]를 사용하거나, 도구 사용이 어려운 경우 [[추상화]]를 이용해 Soft Delete 가 적용된 테이블 조회, 삭제 쿼리에 대한 검수 로직을 추가하는 것이 좋습니다.

## 2. 인덱스 및 성능 문제

데이터베이스에 삭제된 레코드가 계속해서 누적되면 테이블의 크기가 불필요하게 커집니다. 이는 인덱스의 크기 증가로 이어져 쿼리 성능에 영향을 미칩니다. 특히 대용량 데이터를 처리하는 시스템에서는 성능 저하가 두드러질 수 있습니다.

## 3. 데이터 무결성 유지의 어려움

Soft Delete 를 사용하면 참조 무결성 관리가 복잡해집니다. 예를 들어, 삭제된 부모 레코드가 존재하는 상태에서 자식 레코드를 삽입하거나 참조할 때 예상치 못한 문제가 발생할 수 있습니다. 이를 방지하기 위해 추가적인 로직이나 제약 조건을 구현해야 합니다.

## 4. 비즈니스 로직 복잡도 증가

데이터의 활성/비활성 상태를 고려하여 비즈니스 로직을 작성해야 합니다. 이는 권한 관리, 데이터 표시 여부, 연산 적용 등 다양한 부분에서 복잡성을 증가시킵니다. 또한 상태 전환(삭제, 복구 등)에 따른 예외 처리를 추가로 고려해야 합니다.

## 5. 유지보수 및 테스트 부담 증가

Soft Delete 를 고려한 코드는 테스트 시나리오가 복잡해집니다. 삭제된 데이터에 대한 처리, 복구 시나리오, 경계 조건 등을 모두 테스트해야 하며, 이는 개발자의 부담을 가중시킵니다. 또한 신규 개발자나 팀원이 시스템을 이해하고 유지보수하는 데 더 많은 시간이 필요합니다.

## 6. 데이터 관리의 어려움

물리적으로 삭제되지 않은 데이터가 쌓이면 저장 공간을 불필요하게 차지할 뿐만 아니라 백업 및 복원 작업에도 영향을 미칩니다. 주기적인 데이터 정리나 아카이빙 전략이 필요하며, 이는 추가적인 관리 포인트가 됩니다.

## 7. 보안 및 규제 준수 이슈

일부 산업에서는 데이터의 완전한 삭제를 요구하기도 합니다. Soft Delete 는 데이터가 실제로 제거되지 않기 때문에 개인정보 보호법 등 규제 준수 측면에서 문제가 될 수 있습니다. 이를 해결하기 위해 추가적인 데이터 파기 절차를 마련해야 합니다.

---

## 결론

Soft Delete 는 데이터 복구와 감사 측면에서 유용한 기능이지만, 시스템 전반에 걸쳐 다양한 복잡성을 초래합니다. 쿼리 작성의 번거로움부터 성능 문제, 비즈니스 로직의 복잡화, 유지보수 부담 증가까지 고려해야 할 요소가 많습니다. 따라서 Soft Delete 를 도입하기 전에 시스템 요구사항과 팀의 역량을 신중하게 평가하고, 필요에 따라 혼합된 접근법(예: 일정 기간 후 실제 삭제)을 고려하는 것이 바람직합니다.

---

## 추가 참고 사항

- **혼합된 접근법**: 일정 기간 동안 Soft Delete 를 적용한 후, 그 이후에는 실제로 데이터를 삭제하는 방식을 사용할 수 있습니다.
- **아카이빙**: 오래된 데이터나 삭제된 데이터를 별도의 아카이브 테이블이나 스토리지로 이전하여 메인 시스템의 부담을 줄일 수 있습니다.
- **자동화 도구 활용**: [[Hibernate 를 이용한 Soft Delete 구현||Soft Delete 로 인한 쿼리 작성 실수를 방지하기 위해 ORM(Object-Relational Mapping) 등의 도구]]를 활용하여 공통 로직을 관리할 수 있습니다.

---

Soft Delete 는 장단점이 명확한 기법입니다. 시스템의 특성과 요구사항에 맞게 신중하게 적용하여 효율적이고 유지보수 가능한 시스템을 구축하시기 바랍니다.