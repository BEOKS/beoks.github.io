하향식 통합 테스트(Top-down Integration Testing)는 , 소프트웨어 시스템의 최상위 제어 모듈부터 시작하여 계층 구조를 따라 아래 방향으로 점차 하위 모듈들을 통합하며 테스트를 진행하는 방법입니다. 이 방식은 시스템의 전체적인 구조와 주요 제어 흐름을 초기에 검증하는 데 중점을 둡니다.

---

## 하향식 통합 테스트란?

**하향식 통합 테스트**는 이름에서 알 수 있듯이, 시스템의 '위에서 아래로(Top-down)' 내려가면서 모듈을 통합하고 검증하는 전략입니다. 테스트는 주로 사용자 인터페이스(UI)나 시스템의 주 제어 흐름을 담당하는 최상위 모듈에서 시작됩니다.

이때, 아직 통합되지 않았거나 개발이 완료되지 않은 하위 모듈의 기능은 **[[테스트 스텁(Test Stub)]]**이라는 임시 모듈로 대체됩니다. 테스트 스텁은 실제 하위 모듈의 인터페이스를 모방하고, 테스트에 필요한 최소한의 응답(예: 특정 값 반환, 간단한 로직 수행)을 제공하여 상위 모듈이 정상적으로 테스트될 수 있도록 지원합니다.

이 접근 방식의 주요 목표는 다음과 같습니다.

- 시스템의 주요 제어 로직과 아키텍처의 타당성을 초기에 검증합니다.
- 중요한 인터페이스 결함을 조기에 발견합니다.
- 사용자 관점에서 시스템의 동작을 초기에 확인할 수 있는 프로토타입 역할을 할 수 있습니다.

---

## 하향식 통합 테스트 프로세스

하향식 통합 테스트는 다음과 같은 단계적인 프로세스를 통해 진행됩니다.

```mermaid
graph TD
    A[최상위 모듈 식별 및 테스트 준비] --> B[테스트 스텁 개발];
    B --> C[상위 모듈과 스텁 통합 및 테스트];
    C --> D[스텁을 실제 하위 모듈로 점진적 대체];
    D --> E["대체된 모듈과 관련된 새로운 하위 스텁 개발 (필요시)"];
    E --> F[반복적인 통합 및 리그레션 테스트];
    F --> G[모든 모듈 통합 완료 시까지 반복];

    subgraph "프로세스 흐름"
        direction LR
        SM[상위 모듈] -->|호출| Stub1[스텁 1]
        SM -->|호출| Stub2[스텁 2]
        SM -- 테스트 --> Result1[초기 테스트 결과]

        SM2[상위 모듈] -->|호출| RealMod1[실제 모듈 1]
        RealMod1 -->|호출| Stub3[스텁 3]
        SM2 -->|호출| Stub2_2[스텁 2]
        SM2 -- 테스트 --> Result2[다음 단계 테스트 결과]
    end
```

1. **최상위 제어 모듈 식별**: 테스트를 시작할 시스템의 가장 높은 수준에 있는 하나 또는 여러 개의 제어 모듈을 식별합니다.
2. **테스트 스텁 개발**: 식별된 최상위 모듈이 직접 호출하는 모든 하위 모듈에 대해 테스트 스텁을 개발합니다. 이 스텁들은 실제 하위 모듈의 인터페이스를 가지며, 예상되는 최소한의 동작을 시뮬레이션합니다. (자세한 내용은 [[테스트 스텁(Test Stub)의 역할과 구현]] 참고)
3. **상위 모듈과 스텁 통합 및 테스트**: 최상위 모듈을 개발된 스텁들과 통합하여 첫 번째 테스트를 수행합니다. 이를 통해 상위 모듈의 로직과 스텁과의 인터페이스를 검증합니다.
4. **스텁을 실제 하위 모듈로 점진적 대체**: 테스트 스텁 중 하나를 실제 개발된 하위 모듈로 대체합니다. 한 번에 하나의 스텁을 대체하거나, 관련된 작은 그룹의 스텁들을 함께 대체할 수 있습니다.
    - **깊이 우선(Depth-first) 방식**: 시스템의 특정 제어 경로를 따라 가능한 깊게 내려가면서 스텁을 실제 모듈로 대체합니다.
    - **너비 우선(Breadth-first) 방식**: 특정 레벨의 모든 스텁을 실제 모듈로 먼저 대체한 후 다음 레벨로 이동합니다.
5. **새로운 하위 스텁 개발 (필요시)**: 새로 통합된 실제 하위 모듈이 또 다른 하위 모듈들을 호출한다면, 이 새로운 하위 모듈들에 대한 스텁을 개발합니다.
6. **반복적인 통합 및 리그레션 테스트**: 새로운 모듈이 통합될 때마다 테스트를 다시 수행합니다. 이때, 기존에 잘 동작하던 기능에 문제가 생기지 않았는지 확인하기 위해 [[리그레션 테스트(Regression Testing)]]도 함께 수행하는 것이 좋습니다.
7. **모든 모듈 통합 완료 시까지 반복**: 시스템의 특정 부분 또는 전체 시스템의 모든 모듈이 실제 모듈로 대체되고 테스트될 때까지 위의 4~6단계를 반복합니다.

---

## 하향식 통합 테스트의 핵심: 테스트 스텁

하향식 통합 테스트의 성공적인 수행은 **테스트 스텁**의 적절한 설계와 구현에 크게 의존합니다. 스텁은 다음과 같은 역할을 수행해야 합니다.

- 상위 모듈로부터 전달받는 파라미터를 검증합니다.
- 상위 모듈이 기대하는 형식으로 값을 반환합니다.
- 필요에 따라 특정 상태나 예외 상황을 시뮬레이션합니다.

스텁을 너무 단순하게 만들면 테스트 커버리지가 낮아질 수 있고, 너무 복잡하게 만들면 스텁 개발 자체가 부담이 될 수 있습니다. 따라서 테스트 목표에 맞는 적절한 수준의 스텁을 구현하는 것이 중요합니다. 자세한 내용은 [[테스트 스텁(Test Stub)의 역할과 구현]]에서 다룹니다.

---

## 고려사항

하향식 통합 테스트를 적용할 때 다음과 같은 점들을 고려해야 합니다.

- **스텁 개발의 어려움**: 많은 수의 스텁이 필요할 수 있으며, 특히 복잡한 로직을 가진 하위 모듈을 대체하는 스텁을 만드는 것은 어려울 수 있습니다.
- **하위 레벨 모듈 테스트 지연**: 시스템의 중요한 기능을 수행하는 하위 레벨의 모듈들은 테스트 후반부에 검증될 가능성이 높아, 이들 모듈에서 심각한 결함이 발견되면 프로젝트 일정에 큰 영향을 미칠 수 있습니다.
- **테스트 조건의 표현**: 하위 레벨에서 발생하는 특정 테스트 조건을 상위 레벨에서 스텁을 통해 재현하기 어려울 수 있습니다.

---

## 결론

하향식 통합 테스트는 시스템의 전체적인 구조와 흐름을 조기에 파악하고 검증할 수 있다는 점에서 유용한 접근 방식입니다. 특히 사용자 인터페이스 중심적이거나 제어 흐름이 복잡한 시스템의 초기 단계에서 아키텍처의 안정성을 확보하는 데 효과적입니다.

그러나 테스트 스텁의 구현 부담과 하위 중요 모듈의 테스트 지연 가능성 등도 고려해야 합니다. 프로젝트의 특성과 개발 상황에 맞춰 [[상향식 통합 테스트(Bottom-up Integration Testing)]]나 [[샌드위치 통합 테스트(Sandwich Integration Testing)]]와 같은 다른 통합 테스트 전략과 비교하여 최적의 방법을 선택하는 것이 중요합니다.

---

## 참고 자료

- Pressman, R. S., & Maxim, B. R. (2019). _Software Engineering: A Practitioner's Approach (9th ed.)_. McGraw-Hill Education.
- ISTQB (International Software Testing Qualifications Board) - Foundation Level Syllabus.
- Kaner, C., Falk, J., & Nguyen, H. Q. (1999). _Testing Computer Software (2nd ed.)_. Wiley.