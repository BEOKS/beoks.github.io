μ•λ…•ν•μ„Έμ”! μ¤λμ€ **μ΄ν„°λ μ΄ν„° ν¨ν„΄(Iterator Pattern)**μ— λ€ν•΄ κΉμ΄ μκ² μ•μ•„λ³΄κ² μµλ‹λ‹¤. μ΄ν„°λ μ΄ν„° ν¨ν„΄μ€ μ»¬λ ‰μ…μ λ‚΄λ¶€ κµ¬μ΅°λ¥Ό λ…Έμ¶ν•μ§€ μ•μΌλ©΄μ„ μ”μ†λ“¤μ— μμ°¨μ μΌλ΅ μ ‘κ·Όν•  μ μλ” λ°©λ²•μ„ μ κ³µν•λ” μ•„μ£Ό μ μ©ν• ν¨ν„΄μ…λ‹λ‹¤. π§

---

### **μ΄ν„°λ μ΄ν„° ν¨ν„΄μ΄λ€ λ¬΄μ—‡μΌκΉμ”?**

μ΄ ν¨ν„΄μ ν•µμ‹¬ λ©ν‘λ” **μ»¬λ ‰μ…(Collection) κ°μ²΄μ λ‚΄λ¶€ ν‘ν„ λ°©μ‹(μ: `List`, `Set`, `Map` λ“±)μ„ ν΄λΌμ΄μ–ΈνΈλ΅λ¶€ν„° μ¨κΈ°λ” κ²ƒ**μ…λ‹λ‹¤. ν΄λΌμ΄μ–ΈνΈλ” μ»¬λ ‰μ…μ΄ μ–΄λ–»κ² κµ¬ν„λμ—λ”μ§€ μ „ν€ λ°λΌλ„, μ΄ν„°λ μ΄ν„°(Iterator)λΌλ” ν†µμΌλ μΈν„°νμ΄μ¤λ¥Ό ν†µν•΄ μ»¬λ ‰μ…μ λ¨λ“  μ”μ†μ— μ ‘κ·Όν•  μ μμµλ‹λ‹¤.

λ§μΉ TV λ¦¬λ¨μ»¨κ³Ό κ°™μµλ‹λ‹¤. μ°λ¦¬λ” λ¦¬λ¨μ»¨μ 'λ‹¤μ μ±„λ„' λ²„νΌλ§ λ„λ¥΄λ©΄ μ±„λ„μ΄ λ°”λ€λ” κ²ƒμ„ μ•μ§€, TV λ‚΄λ¶€μ—μ„ μ–΄λ–¤ λ³µμ΅ν• κ³Όμ •μ„ κ±°μ³ μ±„λ„μ΄ λ³€κ²½λλ”μ§€λ” μ• ν•„μ”κ°€ μ—†μ£ . μ—¬κΈ°μ„ λ¦¬λ¨μ»¨μ΄ λ°”λ΅ **μ΄ν„°λ μ΄ν„°**μ μ—­ν• μ„ ν•λ” κ²ƒμ…λ‹λ‹¤.

---

### **μ΄ν„°λ μ΄ν„° ν¨ν„΄μ κµ¬μ΅°**

μ΄ν„°λ μ΄ν„° ν¨ν„΄μ€ ν¬κ² λ‘ κ°€μ§€ ν•µμ‹¬ μ—­ν• λ΅ κµ¬μ„±λ©λ‹λ‹¤.

1. **Iterator (λ°λ³µμ)**: μ»¬λ ‰μ…μ μ”μ†λ¥Ό μνν•κ³  μ ‘κ·Όν•λ” λ° ν•„μ”ν• μΈν„°νμ΄μ¤λ¥Ό μ •μν•©λ‹λ‹¤. μΌλ°μ μΌλ΅ `hasNext()`μ™€ `next()` κ°™μ€ λ©”μ„λ“λ¥Ό ν¬ν•¨ν•©λ‹λ‹¤.
2. **Aggregate (μ§‘ν•©μ²΄)**: μ΄ν„°λ μ΄ν„° κ°μ²΄λ¥Ό μƒμ„±ν•λ” μΈν„°νμ΄μ¤λ¥Ό μ •μν•©λ‹λ‹¤. μ΄ μΈν„°νμ΄μ¤λ¥Ό κµ¬ν„ν•λ” ν΄λμ¤κ°€ λ°”λ΅ μ°λ¦¬κ°€ μνν•λ ¤λ” μ‹¤μ  μ»¬λ ‰μ… κ°μ²΄μ…λ‹λ‹¤.

```mermaid
classDiagram
    direction RL
    class Aggregate {
        <<interface>>
        +createIterator() Iterator
    }
    class ConcreteAggregate {
        +createIterator() Iterator
    }
    class Iterator {
        <<interface>>
        +hasNext() boolean
        +next() Object
    }
    class ConcreteIterator {
        -aggregate ConcreteAggregate
        -currentIndex int
        +hasNext() boolean
        +next() Object
    }
    class Client

    Client ..> Aggregate
    Client ..> Iterator
    Aggregate <|-- ConcreteAggregate
    Iterator <|-- ConcreteIterator
    ConcreteAggregate --> ConcreteIterator : creates
```

- **Client**: `Aggregate`μ™€ `Iterator` μΈν„°νμ΄μ¤λ¥Ό λ¨λ‘ μ‚¬μ©ν•μ—¬ `ConcreteAggregate`μ μ”μ†λ“¤μ„ μνν•©λ‹λ‹¤.
- **Aggregate**: `Iterator` κ°μ²΄λ¥Ό μƒμ„±ν•λ” ν©ν† λ¦¬ λ©”μ„λ“(`createIterator()`)λ¥Ό κ°€μ§‘λ‹λ‹¤.
- **ConcreteAggregate**: `Aggregate`λ¥Ό κµ¬ν„ν•λ©°, `ConcreteIterator`μ μΈμ¤ν„΄μ¤λ¥Ό μƒμ„±ν•μ—¬ λ°ν™ν•©λ‹λ‹¤.
- **Iterator**: μνλ¥Ό μ„ν• ν‘μ¤€ λ©”μ„λ“(`hasNext()`, `next()`)λ¥Ό μ •μν•©λ‹λ‹¤.
- **ConcreteIterator**: `Iterator`λ¥Ό κµ¬ν„ν•λ©°, νΉμ • `ConcreteAggregate`λ¥Ό μνν•λ” λ΅μ§μ„ κ°€μ§‘λ‹λ‹¤. ν„μ¬ μν μ„μΉλ¥Ό μ¶”μ ν•©λ‹λ‹¤.

---

### **μ™ μ΄ν„°λ μ΄ν„° ν¨ν„΄μ„ μ‚¬μ©ν•΄μ•Ό ν• κΉμ”?**

μ΄ν„°λ μ΄ν„° ν¨ν„΄μ„ μ‚¬μ©ν•λ©΄ λ‹¤μκ³Ό κ°™μ€ μ¥μ μ„ μ–»μ„ μ μμµλ‹λ‹¤.

- **μΊ΅μν™” κ°•ν™”**: μ»¬λ ‰μ…μ λ‚΄λ¶€ κµ¬μ΅°κ°€ μ™Έλ¶€μ— λ…Έμ¶λμ§€ μ•μµλ‹λ‹¤. μ΄λ” [[μΊ΅μν™”(Encapsulation)]] μ›μΉ™μ„ μ§€ν‚¤λ” λ° λ„μ›€μ΄ λλ©°, μ»¬λ ‰μ…μ κµ¬ν„μ΄ λ³€κ²½λμ–΄λ„ ν΄λΌμ΄μ–ΈνΈ μ½”λ“λ” μν–¥μ„ λ°›μ§€ μ•μµλ‹λ‹¤.
- **λ‹¨μΌ μ±…μ„ μ›μΉ™ (SRP)**: μ»¬λ ‰μ… μν λ΅μ§μ΄ μ»¬λ ‰μ… κ°μ²΄ μμ²΄μ—μ„ λ¶„λ¦¬λ©λ‹λ‹¤. μ»¬λ ‰μ…μ€ λ°μ΄ν„° μ €μ¥μ΄λΌλ” λ³Έμ—°μ μ±…μ„μ—λ§ μ§‘μ¤‘ν•κ³ , μν μ±…μ„μ€ μ΄ν„°λ μ΄ν„°μ—κ² μ„μ„λ©λ‹λ‹¤. μ΄λ”  [[λ‹¨μΌ μ±…μ„ μ›μΉ™(Single Responsibility Principle)]]μ„ λ§μ΅±μ‹ν‚µλ‹λ‹¤.
- **μ½”λ“ μ μ—°μ„± λ° μ¬μ‚¬μ©μ„± μ¦κ°€**: λ‹¤μ–‘ν• μΆ…λ¥μ μ»¬λ ‰μ…μ— λ€ν•΄ ν†µμΌλ λ°©μ‹μΌλ΅ μνν•  μ μμµλ‹λ‹¤. `List`λ¥Ό μνν•λ μ½”λ“λ¥Ό `Set`μ„ μνν•λ„λ΅ λ³€κ²½ν•λ” κ²ƒμ΄ λ§¤μ° κ°„λ‹¨ν•΄μ§‘λ‹λ‹¤.
- **λ‹¤μ–‘ν• μν λ°©μ‹ μ§€μ›**: ν•λ‚μ μ»¬λ ‰μ…μ— λ€ν•΄ μ—¬λ¬ μΆ…λ¥μ μ΄ν„°λ μ΄ν„°(μ: μ •λ°©ν–¥ μν μ΄ν„°λ μ΄ν„°, μ—­λ°©ν–¥ μν μ΄ν„°λ μ΄ν„°)λ¥Ό μ κ³µν•  μ μμµλ‹λ‹¤.

---

### **Javaμ—μ„μ μ΄ν„°λ μ΄ν„° ν¨ν„΄ ν™μ©**

μ‚¬μ‹¤ Java κ°λ°μλΌλ©΄ μ΄λ―Έ μμ‹ λ„ λ¨λ¥΄κ² μ΄ν„°λ μ΄ν„° ν¨ν„΄μ„ λ§¤μΌ μ‚¬μ©ν•κ³  μμ„ κ°€λ¥μ„±μ΄ λ†’μµλ‹λ‹¤. Javaμ [[μ»¬λ ‰μ… ν”„λ μ„μ›ν¬(Collection Framework)]]κ°€ λ°”λ΅ μ΄ν„°λ μ΄ν„° ν¨ν„΄μ„ κΈ°λ°μΌλ΅ μ„¤κ³„λμ—κΈ° λ•λ¬Έμ…λ‹λ‹¤.

`java.util.Iterator` μΈν„°νμ΄μ¤μ™€ `java.lang.Iterable` μΈν„°νμ΄μ¤κ°€ μ΄ ν¨ν„΄μ ν•µμ‹¬μ…λ‹λ‹¤.

- **`Iterable`**: `Aggregate` μ—­ν• μ— ν•΄λ‹Ήν•λ©°, `iterator()` λ©”μ„λ“λ¥Ό ν†µν•΄ `Iterator` κ°μ²΄λ¥Ό λ°ν™ν•©λ‹λ‹¤. `List`, `Set`, `Map` λ“± λ¨λ“  μ»¬λ ‰μ… ν΄λμ¤κ°€ μ΄ μΈν„°νμ΄μ¤λ¥Ό κµ¬ν„ν•©λ‹λ‹¤.
- **`Iterator`**: `Iterator` μ—­ν• μ— ν•΄λ‹Ήν•λ©°, `hasNext()`, `next()`, `remove()` λ©”μ„λ“λ¥Ό μ κ³µν•©λ‹λ‹¤.

κ°„λ‹¨ν• Java μμ‹ μ½”λ“λ¥Ό μ‚΄ν΄λ³΄κ² μµλ‹λ‹¤.

```java
import java.util.ArrayList;
import java.util.Iterator;
import java.util.List;

public class IteratorExample {
    public static void main(String[] args) {
        // ConcreteAggregate μ—­ν• 
        List<String> fruits = new ArrayList<>();
        fruits.add("Apple");
        fruits.add("Banana");
        fruits.add("Cherry");

        // Aggregateλ΅λ¶€ν„° Iteratorλ¥Ό μ–»μ
        Iterator<String> iterator = fruits.iterator(); // iterator() λ©”μ„λ“ μ‚¬μ©

        // Clientλ” Iteratorλ¥Ό μ‚¬μ©ν•μ—¬ μ”μ†λ¥Ό μν
        while (iterator.hasNext()) {
            String fruit = iterator.next();
            System.out.println(fruit);
        }
    }
}
```

μ„ μ½”λ“μ—μ„ `main` λ©”μ„λ“(Client)λ” `ArrayList`μ λ‚΄λ¶€ κµ¬μ΅°κ°€ μ–΄λ–»κ² μƒκ²Όλ”μ§€ μ „ν€ μ• ν•„μ”κ°€ μ—†μµλ‹λ‹¤. λ‹¨μ§€ `iterator()`λ¥Ό νΈμ¶ν•μ—¬ `Iterator`λ¥Ό μ–»κ³ , `hasNext()`μ™€ `next()`λ¥Ό ν†µν•΄ μ”μ†λ¥Ό μνν•  λΏμ…λ‹λ‹¤. λ§μ•½ `ArrayList`λ¥Ό `LinkedList`λ‚ `HashSet`μΌλ΅ λ°”κΏ”λ„ μνν•λ” μ½”λ“λ” μ „ν€ λ³€κ²½ν•  ν•„μ”κ°€ μ—†μµλ‹λ‹¤. μ΄κ²ƒμ΄ μ΄ν„°λ μ΄ν„° ν¨ν„΄μ κ°€μ¥ ν° νμ…λ‹λ‹¤. 

---

### **μ¤ν”„λ§ ν”„λ μ„μ›ν¬μ™€ μ΄ν„°λ μ΄ν„° ν¨ν„΄**

μ¤ν”„λ§ ν”„λ μ„μ›ν¬(Spring Framework)μ—μ„λ„ μ΄ν„°λ μ΄ν„° ν¨ν„΄μ μ›λ¦¬λ¥Ό μ°Ύμ•„λ³Ό μ μμµλ‹λ‹¤. μλ¥Ό λ“¤μ–΄, μ¤ν”„λ§ λ°μ΄ν„° JPAμ—μ„ μ κ³µν•λ” `PagingAndSortingRepository`λ” `findAll(Pageable pageable)` λ©”μ„λ“λ¥Ό ν†µν•΄ `Page<T>` κ°μ²΄λ¥Ό λ°ν™ν•©λ‹λ‹¤.

μ΄ `Page<T>` κ°μ²΄λ” `Iterable<T>`λ¥Ό μƒμ†λ°›κΈ° λ•λ¬Έμ—, ν„μ¬ νμ΄μ§€μ λ°μ΄ν„°λ“¤μ„ μ΄ν„°λ μ΄ν„° ν¨ν„΄μ„ ν†µν•΄ μ‰½κ² μνν•  μ μμµλ‹λ‹¤.

```java
// Spring Data Commonsμ Page μΈν„°νμ΄μ¤ μΌλ¶€
public interface Page<T> extends Slice<T> {
    
    // ... λ‹¤λ¥Έ λ©”μ„λ“λ“¤
    
    // Iterable<T>λ¥Ό μƒμ†λ°›μ•„ iterator() λ©”μ„λ“λ¥Ό μ κ³µ
    @Override
    Iterator<T> iterator(); 
}
```

ν΄λΌμ΄μ–ΈνΈ μ½”λ“λ” λ°μ΄ν„°λ² μ΄μ¤μ—μ„ λ°μ΄ν„°λ¥Ό μ–΄λ–»κ² νμ΄μ§• μ²λ¦¬ν•μ—¬ κ°€μ Έμ™”λ”μ§€ μƒμ„Έν μ• ν•„μ” μ—†μ΄, λ°ν™λ `Page` κ°μ²΄μ μ΄ν„°λ μ΄ν„°λ¥Ό μ‚¬μ©ν•μ—¬ κ²°κ³Ό λ°μ΄ν„°λ¥Ό μ²λ¦¬ν•κΈ°λ§ ν•λ©΄ λ©λ‹λ‹¤. μ΄μ²λΌ μ¤ν”„λ§μ€ λ³µμ΅ν• λ‚΄λ¶€ λ™μ‘μ„ μ¶”μƒν™”ν•κ³  κ°λ°μκ°€ ν•µμ‹¬ λΉ„μ¦λ‹μ¤ λ΅μ§μ— μ§‘μ¤‘ν•  μ μλ„λ΅ λ•λ” λ° μ΄ν„°λ μ΄ν„°μ™€ κ°™μ€ λ””μμΈ ν¨ν„΄μ„ μ κ·Ήμ μΌλ΅ ν™μ©ν•©λ‹λ‹¤.

---

### **μ΄ν„°λ μ΄ν„° ν¨ν„΄ μ‚¬μ© μ‹ κ³ λ ¤μ‚¬ν•­**

μ΄ν„°λ μ΄ν„° ν¨ν„΄μ€ λ§¤μ° μ μ©ν•μ§€λ§, ν• κ°€μ§€ μ£Όμν•  μ μ΄ μμµλ‹λ‹¤. λ°”λ΅ **μν μ¤‘ μ»¬λ ‰μ… λ³€κ²½** λ¬Έμ μ…λ‹λ‹¤.

μ΄ν„°λ μ΄ν„°λ¥Ό μ‚¬μ©ν•μ—¬ μ»¬λ ‰μ…μ„ μνν•λ” λ„μ¤‘μ— ν•΄λ‹Ή μ»¬λ ‰μ…μ μ”μ†κ°€ μ¶”κ°€λκ±°λ‚ μ‚­μ λλ©΄ `ConcurrentModificationException`μ΄ λ°μƒν•  μ μμµλ‹λ‹¤. μ΄λ” μ΄ν„°λ μ΄ν„°κ°€ μν μ‹μ‘ μ‹μ μ μ»¬λ ‰μ… μƒνƒλ¥Ό κΈ°μ¤€μΌλ΅ λ™μ‘ν•λ”λ°, μ‹¤μ  μ»¬λ ‰μ…μ μƒνƒκ°€ λ‹¬λΌμ§€λ©΄μ„ λ°μƒν•λ” λ¬Έμ μ…λ‹λ‹¤.

---

### **κ²°λ΅ **

μ΄ν„°λ μ΄ν„° ν¨ν„΄μ€ μ»¬λ ‰μ…μ λ‚΄λ¶€ κµ¬ν„μ„ μ¨κΈ°κ³ , μ”μ†μ— μ ‘κ·Όν•λ” λ°©λ²•μ„ ν‘μ¤€ν™”ν•μ—¬ μ½”λ“μ **μ μ—°μ„±**, **μ¬μ‚¬μ©μ„±**, **μΊ΅μν™”**λ¥Ό λ†’μ—¬μ£Όλ” κ°•λ ¥ν• λ””μμΈ ν¨ν„΄μ…λ‹λ‹¤. μ΄λ―Έ Javaμ™€ μ¤ν”„λ§μ„ λΉ„λ΅―ν• λ§μ€ ν”„λ μ„μ›ν¬μ™€ λΌμ΄λΈλ¬λ¦¬μ— κΉμ™μ΄ λ…Ήμ•„λ“¤μ–΄ μμΌλ―€λ΅, κ·Έ μ›λ¦¬λ¥Ό μ •ν™•ν μ΄ν•΄ν•κ³  μ‚¬μ©ν•λ‹¤λ©΄ λ”μ± κ²¬κ³ ν•κ³  μ μ§€λ³΄μν•κΈ° μΆ‹μ€ μ½”λ“λ¥Ό μ‘μ„±ν•  μ μμ„ κ²ƒμ…λ‹λ‹¤.
