네, Gherkin 언어에 대해 상세하고 명확하게 소개하는 개발자 블로그 글을 옵시디언 형식으로 작성해 드리겠습니다. Cucumber의 핵심 요소인 Gherkin을 이해하고 효과적으로 사용하는 데 도움이 되도록 구성하겠습니다.

---

tags: #Gherkin #Cucumber #BDD #SpecificationByExample #DSL

date: {{date}}

# Gherkin이란 무엇인가? Cucumber 테스트를 위한 핵심 언어 마스터하기

안녕하세요, 개발자 여러분! [[Cucumber란 무엇인가]] 글에서 Cucumber가 [[Behavior-Driven Development (BDD)|BDD(행위 주도 개발)]]를 위한 강력한 도구임을 소개해 드렸습니다. Cucumber의 마법과 같은 능력, 즉 "사람이 읽을 수 있는 명세"를 "실행 가능한 테스트"로 만드는 것의 중심에는 바로 **Gherkin(거킨)**이라는 특별한 언어가 있습니다.

이 글에서는 Gherkin이 무엇인지, 왜 필요한지, 그리고 어떻게 효과적으로 작성하여 팀 전체의 소통과 소프트웨어 품질을 향상시킬 수 있는지 자세히 알아보겠습니다.

## Gherkin의 정의와 목적: 단순한 텍스트를 넘어

**Gherkin**은 Cucumber에서 사용하는 **비즈니스 가독성 있는, 도메인 특화 언어(Business Readable, Domain Specific Language, BRDSL)**입니다. 복잡한 프로그래밍 구문 대신, 정해진 키워드와 자연어를 사용하여 시스템의 행위(Behavior)를 명확하고 구조적으로 기술할 수 있도록 설계되었습니다.

Gherkin의 주요 목적은 다음과 같습니다:

1. **시스템 행위의 명확한 기술**: 소프트웨어가 특정 조건에서 어떻게 동작해야 하는지를 구체적인 시나리오로 표현합니다.
2. **[[살아있는 문서 (Living Documentation)]]의 기반**: Gherkin으로 작성된 문서는 실제 코드(Step Definitions)와 연결되어 실행되므로, 항상 시스템의 현재 상태를 정확히 반영하는 최신 문서가 됩니다.
3. **[[유비쿼터스 언어(Ubiquitous Language)]] 제공**: 개발자, 기획자, QA, 현업 담당자 등 기술적 배경이 다른 팀 구성원 모두가 이해하고 소통할 수 있는 공통의 언어 역할을 합니다. 이를 통해 요구사항에 대한 오해를 줄이고 협업을 증진합니다.

Gherkin은 "예시를 통한 명세(Specification by Example)" 철학을 구현하는 핵심 도구로, 시스템이 _무엇을_ 해야 하는지에 집중합니다.

## Gherkin의 기본 구조: Feature 파일

Gherkin 문서는 일반적으로 `.feature` 라는 확장자를 가진 텍스트 파일에 작성됩니다. 이 파일은 하나의 기능(Feature) 또는 사용자 스토리에 대한 여러 시나리오들을 담고 있습니다.

Feature 파일의 기본적인 계층 구조는 다음과 같습니다:

Gherkin

```
# 언어 설정 (선택 사항, 기본은 영어)
# language: ko

Feature: 회원 가입 기능
  사용자는 시스템에 새로운 계정을 생성할 수 있어야 한다.

  Background: 공통 사용자 환경 설정
    Given 사용자는 회원 가입 페이지에 접속해 있다

  Scenario: 필수 정보를 모두 입력한 경우 성공적으로 가입된다
    Given 사용자는 아이디로 "testuser"를 입력한다
    And 사용자는 비밀번호로 "password123"을 입력한다
    And 사용자는 이메일로 "test@example.com"을 입력한다
    When 사용자가 "가입하기" 버튼을 클릭한다
    Then "회원 가입이 완료되었습니다." 메시지가 표시된다
    And 사용자는 로그인 페이지로 이동한다

  Scenario Outline: 다양한 이메일 형식 검증
    Given 사용자는 아이디로 "newuser"를 입력한다
    And 사용자는 비밀번호로 "securepass"를 입력한다
    And 사용자는 이메일로 "<email>"을 입력한다
    When 사용자가 "가입하기" 버튼을 클릭한다
    Then "<status>" 메시지가 표시되어야 한다

    Examples:
      | email               | status             |
      | "valid@example.com" | "가입 성공"        |
      | "invalid-email"     | "잘못된 이메일 형식" |
      | ""                  | "이메일 필수 입력"   |
```

각 구성 요소에 대해서는 아래 키워드 설명에서 더 자세히 다루겠습니다.

## Gherkin의 핵심 키워드 상세 해부

Gherkin은 몇 가지 주요 키워드를 중심으로 구조화됩니다. 각 키워드의 의미와 사용법을 이해하는 것이 Gherkin을 효과적으로 활용하는 첫걸음입니다.

- **`Feature`**: 테스트 대상이 되는 시스템의 기능이나 사용자 스토리의 이름과 목적을 기술합니다. 하나의 `.feature` 파일에는 하나의 `Feature`만 존재해야 합니다. [[Gherkin - Feature 키워드]]에서 자세히 알아보세요.
    
- **`Rule`** (Gherkin 6+): `Feature` 내에서 관련된 여러 시나리오들을 특정 비즈니스 규칙에 따라 그룹화할 때 사용합니다. 복잡한 기능을 더 명확하게 구조화하는 데 도움이 됩니다. [[Gherkin - Rule 키워드]]를 참고하세요.
    
- **`Background`**: 해당 `Feature` 파일 내의 모든 `Scenario` (또는 `Scenario Outline`) 시작 전에 공통적으로 실행되어야 하는 `Given` 단계들을 정의합니다. 코드 중복을 줄이고 시나리오를 간결하게 만드는 데 유용합니다. [[Gherkin - Background 키워드]]에서 사용법을 확인하세요.
    
- **`Scenario`**: 시스템의 특정 행위 또는 비즈니스 규칙을 검증하기 위한 구체적인 예시(상황)를 기술합니다. 각 `Scenario`는 독립적으로 이해되고 실행될 수 있어야 합니다. [[Gherkin - Scenario 키워드]]를 살펴보세요.
    
- **`Given`** (조건): 시나리오 실행을 위한 **사전 조건** 또는 시스템의 **초기 상태**를 설정하는 단계입니다. "어떤 상황에서"를 의미합니다.
    
    - _예시_: `Given 사용자가 로그인되어 있다`
- **`When`** (행위): 시나리오의 **주요 행위**, 즉 사용자의 액션이나 시스템의 특정 이벤트를 기술하는 단계입니다. "어떤 행동을 하면"을 의미합니다.
    
    - _예시_: `When 사용자가 '검색' 버튼을 클릭한다`
- **`Then`** (결과): `When` 단계에서 발생한 행위의 **예상 결과** 또는 시스템의 **최종 상태**를 검증하는 단계입니다. "어떤 결과가 나와야 한다"를 의미합니다.
    
    - _예시_: `Then 검색 결과 페이지가 표시된다`
- **`And`**, **`But`** (그리고, 그러나): 이전 `Given`, `When`, `Then` 단계에 논리적으로 이어지는 추가적인 단계를 기술할 때 사용합니다. 이 키워드들은 이전 단계의 키워드(Given, When, Then)를 문맥상 그대로 따르며, Gherkin 문서의 가독성을 높여줍니다.
    
    - _예시_:
        
        Gherkin
        
        ```
        Given 사용자가 로그인되어 있다
        And 사용자의 장바구니에는 상품이 담겨 있다
        When 사용자가 '결제하기' 버튼을 클릭한다
        Then 결제 완료 페이지로 이동한다
        But 사용자의 포인트는 차감되지 않는다
        ```
        
- **`Scenario Outline`** (또는 Gherkin 6+ 에서는 `Scenario Template`): 동일한 행위 로직을 여러 다른 데이터 예시로 반복 테스트하고자 할 때 사용하는 시나리오 템플릿입니다. 데이터는 `<placeholder>` 형태로 표현됩니다. [[Gherkin - Scenario Outline과 Examples]]에서 자세히 설명합니다.
    
- **`Examples`** (또는 Gherkin 6+ 에서는 `Scenarios`): `Scenario Outline`에 사용될 실제 데이터 값들을 표(table) 형태로 제공합니다. 표의 각 행(header 행 제외)은 하나의 테스트 케이스가 됩니다.
    
- **`*`** (Asterisk / 별표): `Given`, `When`, `Then`, `And`, `But` 키워드 대신 사용할 수 있는 일반적인 Step 시작 키워드입니다. 주로 연속적인 목록 형태의 Step을 표현할 때나, 키워드의 반복을 피하고 싶을 때 가독성을 위해 사용되기도 합니다.
    
    - _예시_:
        
        Gherkin
        
        ```
        Given 다음 사용자들이 시스템에 등록되어 있다:
          * 이름: "Alice", 역할: "관리자"
          * 이름: "Bob", 역할: "일반사용자"
        ```
        
- **`"""` (Doc Strings / 독 스트링)**: 여러 줄로 이루어진 텍스트 블록(예: JSON 페이로드, XML 데이터, 긴 설명문 등)을 Step의 인자로 전달할 때 사용합니다. [[Gherkin - Doc Strings 활용법]]을 참고하세요.
    
    - _예시_:
        
        Gherkin
        
        ```
        Given 다음 JSON 요청 본문을 준비한다:
          """
          {
            "username": "testuser",
            "email": "test@example.com"
          }
          """
        ```
        
- **`|` (Data Tables / 데이터 테이블)**: 구조화된 데이터를 여러 행과 열을 가진 표 형태로 Step의 인자로 전달할 때 사용합니다. `Examples` 테이블과 유사하지만, `Scenario Outline`이 아닌 일반 `Scenario` 내의 단일 Step에 데이터를 제공합니다. [[Gherkin - 데이터 테이블 활용법]]에서 사용 예를 확인하세요.
    
    - _예시_:
        
        Gherkin
        
        ```
        Given 다음 상품 정보가 등록되어 있다:
          | 상품명    | 가격   | 재고 |
          | "노트북"  | 1500000 | 10  |
          | "마우스"  | 25000   | 100 |
        ```
        
- **`#` (Comments / 주석)**: Gherkin 파일 내에 설명을 위한 주석을 추가할 때 사용합니다. `#` 기호로 시작하는 줄은 Cucumber 실행 시 무시됩니다.
    
- **`@` (Tags / 태그)**: `Feature`나 `Scenario` (또는 `Scenario Outline`, `Examples` 그룹)에 메타데이터를 부여하는 데 사용됩니다. 태그는 테스트 실행 시 특정 그룹의 테스트만 선택적으로 실행하거나 제외하는 용도, 또는 특정 Hook을 적용하는 용도 등으로 다양하게 활용됩니다. [[Gherkin - 태그(@) 사용 전략]]에서 효과적인 태그 활용법을 알아보세요.
    
    - _예시_: `@smoke_test`, `@regression`, `@sprint-10`

## 좋은 Gherkin 시나리오 작성 원칙

Gherkin을 효과적으로 사용하기 위해서는 몇 가지 작성 원칙을 따르는 것이 좋습니다.

- **선언적(Declarative) 스타일 지향**: 시나리오가 "어떻게(How)" 수행되는지(예: '이 버튼을 클릭하고 저 필드에 입력한다')보다는 "무엇을(What)" 하는지, 즉 사용자의 목표나 시스템의 행위에 초점을 맞춰 작성합니다. 이는 구현 세부사항 변경에 덜 민감한 테스트를 만듭니다. [[Gherkin 스타일: 선언적 vs 명령적]]에서 두 스타일을 비교해보세요.
- **단일 책임 원칙**: 하나의 `Scenario`는 시스템의 하나의 특정 행위 또는 비즈니스 규칙을 검증하는 데 집중해야 합니다. 너무 많은 것을 한 시나리오에 담으려 하면 복잡해지고 이해하기 어려워집니다.
- **명확하고 간결하게**: 모든 팀원이 오해 없이 이해할 수 있도록 명확하고 간결한 언어를 사용합니다.
- **구현 세부사항 숨기기**: UI 요소의 ID, 특정 클래스명이나 메서드명 등 내부 구현에 대한 상세한 내용은 Gherkin 시나리오에 직접 노출하지 않는 것이 좋습니다. 이는 Step Definition 단계에서 처리합니다.
- **도메인 용어 사용**: 현업에서 사용하는 비즈니스 용어와 도메인 언어를 일관되게 사용하여 [[유비쿼터스 언어(Ubiquitous Language)]]를 구축합니다.
- **DRY (Don't Repeat Yourself) 원칙 준수**: 반복되는 Step들은 `Background`를 사용하거나, 유사한 구조의 시나리오는 `Scenario Outline`을 활용하여 중복을 최소화합니다.

## Gherkin 사용의 장점과 한계

**장점**:

- **향상된 협업**: 기술팀과 비기술팀 간의 소통 다리 역할을 합니다.
- **명확한 요구사항**: 실행 가능한 형태로 요구사항이 구체화됩니다.
- **살아있는 문서**: 시스템 변경에 따라 문서(테스트)도 함께 업데이트됩니다.
- **비즈니스 가치 집중**: 사용자의 실제 시나리오에 기반하여 개발합니다.

**한계**:

- **모든 테스트에 적합하지 않음**: 단위 테스트나 순수 성능 테스트 등에는 부적합할 수 있습니다. 주로 인수 테스트나 시스템의 주요 행위 검증에 효과적입니다.
- **작성 및 유지보수 노력**: 잘 정의된 Gherkin 시나리오를 작성하고 유지하는 데는 지속적인 노력이 필요합니다.
- **오용 시 복잡성 증가**: 너무 상세하거나 잘못된 추상화 수준으로 작성된 Gherkin은 오히려 이해를 방해하고 유지보수를 어렵게 만들 수 있습니다.

## 결론: Gherkin, 효과적인 소통과 명세의 시작

Gherkin은 단순히 Cucumber 테스트를 작성하기 위한 문법을 넘어, [[행위 주도 개발(BDD)]] 철학을 팀 내에 실현하고, 소프트웨어 개발의 전 과정에 걸쳐 명확한 소통과 공유된 이해를 구축하는 핵심 도구입니다. Gherkin을 통해 작성된 "살아있는 문서"는 프로젝트의 소중한 자산이 될 수 있습니다.

효과적인 Gherkin 사용은 팀 전체의 노력과 BDD에 대한 이해를 바탕으로 이루어집니다. 이 글이 여러분이 Gherkin을 이해하고 프로젝트에 성공적으로 적용하는 데 도움이 되었기를 바랍니다.

---